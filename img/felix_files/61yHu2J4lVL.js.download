(function(B){var p=window.AmazonUIPageJS||window.P,ra=p._namespace||p.attributeErrors,k=ra?ra("DetailPageImageBlockAssets",""):p;k.guardFatal?k.guardFatal(B)(k,window):k.execute(function(){B(k,window)})})(function(B,p,ra){B.register("postMetric",function(){return{postCountMetric:function(k){if("undefined"!==typeof k){var a=p.ue;if(a){var c=a.count(k)||0;a.count(k,c+1)}}},postTimeMetric:function(k,a){if("undefined"!==typeof k&&"undefined"!==typeof a){var c=p.ue;c&&c.count(k,a)}}}});"use strict";B.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});B.register("postEarlyMetric",function(){return null});"use strict";B.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(k,a,c,n){k=k.extend(!0,{},c,n);var r=new a(k);B.register("ImageBlockAPI",function(){return r.api});return r});"use strict";B.when("A","jQuery").execute(function(k,a){k.on("a:image:load:landingImage",function(){p.performance&&performance.now&&p.ue&&ue.count&&ue.count("DPLandingImageHighResDownloadTime",
performance.now())});k.loadDynamicImage(a("#landingImage"))});"use strict";B.when("ImageBlockATF","atf").register("ImageBlockAiryLoader",function(k){function a(a){a&&(B.load.js(a),p.performance&&performance.now&&p.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",p.parseInt(performance.now())))}function c(a){a&&B.load.css(a)}var n=k.airyConfig;void 0===n?B.when("ImageBlockBTF").execute(function(k){n=k.airyConfig;a(n.jsUrl);c(n.cssUrl);p.performance&&performance.now&&p.ue&&ue.count&&ue.count("WeblabAllocationErrorCount",
(ue.count("WeblabAllocationErrorCount")||0)+1)}):(a(n.jsUrl),c(n.cssUrl))});"use strict";B.when("jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(k,a,c,n,r){var h={};return function(E){var f=this;f.dispatch=function(a,c){var f=h[a];n.isDefined(f)&&k.each(f,function(a,h){h.call(p,c)})};f.register=function(a,c){n.isDefined(h[a])||(h[a]=[]);"function"===typeof c&&h[a].push(c)};f.model=new a(E,f);f.view=new c(E,f,f.model);f.api=new r(E,
f,f.model);f.init=function(){f.model.init();f.view.init()};f.init()}});"use strict";B.when("A","imageBlockUtils").register("ImageBlockModel",function(k,a){function c(c,h,f,k,E){a.isDefined(c)&&(x.type=c);a.isDefined(h)&&(x.index=h);a.isDefined(f)&&(x.thumbnailIndex=f);a.isDefined(k)&&(x.variant=k);a.isDefined(E)&&(x.color=E)}function n(a){c("image",0,0,"MAIN",a||f.landingAsinColor||f.defaultColor)}function r(a){a=a.data;w=k.copy(x);c(a.type,a.index,a.thumbnailIndex,a.variant,a.color)}function h(a){r(a);
a=k.copy(a);a.data=k.copy(x);y.dispatch("updateView",a)}function E(){w=k.copy(x);n(x.color)}var f,y,x={},w={},J,p;return function(a,c){y=c;f=a;y.register("updateSelection",h);y.register("updateModel",r);y.register("resetModel",E);this.init=function(){n()};this.getCurrentItem=function(){return k.copy(x)};this.getPreviousItem=function(){return k.copy(w)};this.setCurrentEvent=function(a){J=a};this.getCurrentEvent=function(){return J};this.setImmersiveViewModalInstance=function(a){p=a};this.getImmersiveViewModalInstance=
function(){return p};this.updateTitle=function(a){f.title=a}}});"use strict";B.when("ImageBlockBTF","postMetric").execute(function(k,a){function c(a,c,E,f,n){function x(a){"click"===a.type&&f.postCountMetric("thumbClick");"click"===a.type&&m.overrideAltImageClickAction?q.dispatch("thumbActionClick",a):q.dispatch("updateSelection",a)}function w(a){m.useClickZoom||q.dispatch("imageClick",a)}function J(a){m.useClickZoom||q.dispatch("imageHover",a)}function P(a){q.dispatch("button360Click",a)}function A(c){!E.isDefined(c)||
"swatchClick"!==c.type&&"updatedData"!==c.type?(l.update(c),"swatchHover"!==c.type&&C.getPreviousItem().thumbnailIndex!==c.data.thumbnailIndex&&f.postCountMetric(c.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",c.data)):l.render(c.data.color,!1,c.onload)}function I(a){q.dispatch("resize",a)}function N(a){E.selectThumbnail(a,G)}function K(){"function"===typeof p.markFeatureInteractive&&p.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",
events:["click"]}]})}function v(){"function"===typeof p.markFeatureInteractive&&p.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["hover"]},{name:"thumbnail",events:["click","hover"]}]});1===k.useIV?B.when("a-modal").execute(function(){K()}):K();m.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],x);a.declarative("thumb-action",["click"],x);a.declarative("main-image-click",["click"],w);a.declarative("main-image-click",["mouseenter",
"mouseleave"],J);a.declarative("button-360-click",["click"],P);c(p).resize(I);p.performance&&performance.now&&p.ue&&ue.count&&ue.count("DPIBMouseEventsReadyTime",performance.now())}function d(a){var c=a.data,e;c&&"ingress"!==c.type&&"click"===a.type&&(e=a);return e}function D(a){var c=C.getCurrentItem(),e={type:"click"};e.$declarativeParent=a;e.data=c;return e}var l,m,q,C,G;return function(a,f,e){l=this;m=a;q=f;C=e;G=c("#imageBlock #altImages ul");var b=c("#imageBlock .canvas"),g=c("#main-image-container"),
k;l.subViews=[];for(f=0;f<n.length;f++)l.subViews.push(new n[f](a,e,l,q));l.render=function(a,e,d){var m=0;G.find(".item").remove();a=a||C.getCurrentItem().color;c.each(l.subViews,function(c,q){m=q.render(a,m,b,G,g,e,d)||m});var q=G.find(".a-button-selected").closest(".a-declarative");k=D(q)};l.init=function(){G=c("#imageBlock #altImages ul");var a=G.find(".a-button-selected").closest(".a-declarative"),b=a.data("action"),a=a.data(b)||{};a.color=m.landingAsinColor||m.defaultColor;q.dispatch("updateModel",
{data:a});l.render(a.color,!0);m.isDebug&&p.console&&console.log(m);q.register("updateView",A);q.register("selectThumbnail",N);v()};l.update=function(a){c.each(l.subViews,function(b,c){c.update(a)});m.usePeekHover&&("mouseleave"===a.type?q.dispatch("updateSelection",k):"click"===a.type&&(k=d(a)||k))}}}var n=["A","jQuery","imageBlockUtils","postMetric"].concat(k.views);B.when.apply(B,n).register("ImageBlockView",function(){for(var a=arguments[0],h=arguments[1],k=arguments[2],f=arguments[3],n=[],x=
4,w=arguments.length;x<w;x++)n.push(arguments[x]);return c(a,h,k,f,n)})});"use strict";B.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(k,a,c,n,r,h,E){function f(b,e,d,g){if(!c.isjQueryObjDefined(b.find(".a-button-selected"))){var m=C.getCurrentItem();if(!g||"chromeless-video"!==m.type||!q.autoplayVideo){g=0;"image"===m.type&&(g=Math.max(w(m.color,m.variant),0));var H=e+g;H>=d&&(g=0,H=e);
e=c.getImageHash(m.color,g,q);-1!==e&&(G.dispatch("updateModel",{data:{index:g,thumbnailIndex:H,variant:e.variant,type:"image"}}),e=b.find(".item").get(H),c.selectGivenThumbnail(a(e),b))}}}function y(b,e,d){e=q.colorImages&&q.colorImages[e];var g=b;c.isDefined(e)&&(a.each(e,function(a,e){b<q.maxAlts&&(c.createThumbnail({type:"image",index:a,thumbnailIndex:b,variant:e.variant},e.thumb,L,"imageThumbnail"),b++)}),h.isEnabled&&E.logAltImgRequestPlacedOnThumbnails(a,h,C),f(L,g,b,d));return b}function x(b,
c){if("image"===b.type){var e=a("#image-canvas-caption #canvasCaption"),d,g=q.staticStrings,H=q.colorImages,m=b.color,h=b.index;c&&q.useIV?d=g.clickToExpand:H[m]&&H[m][h].hiRes&&q.useHoverZoom?(d=q.useHoverZoomIpad?g.touchToZoom:q.useClickZoom?g.clickToZoom:g.rollOverToZoom,q.hoverZoomIndicator&&(d="\x3cimg src\x3d'"+q.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+d)):q.useIV&&(d=g.clickToExpand);e.html(d)}}function w(a,b){return c.getIndexForVariant(a,b,q)}function J(b,d){var g="a-dynamic-image";
if(!q.acEnabled){var m;a.each(b.main,function(a,b){c.isDefined(m)||(m=parseFloat(b[1]/b[0])<=parseFloat(q.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});g+=m}var h=c.getMaxDimensionsOfMainImage(b.main,e,q),H=h[0],l=h[1],h=a("\x3cdiv\x3e\x3c/div\x3e"),H={"max-height":H,"max-width":l};h.addClass(g).css(H).attr({"data-old-hires":b.hiRes,"data-a-manual-replacement":"true",onload:d}).data("a-dynamic-image",b.main);return h}function p(a){var b=u.find(".swatchHoverExp");a=J(a);b.find(".imgTagWrapper").html(a);
k.loadImageManually(a);return b}function A(a){var b=e.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");q.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(q.imgTagWrapperClasses)}function I(a,b){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){var e=c.getImageHash(a.color,a.index,q);if(-1===e)return e={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},c.lazyLoadingRequired(a,C,q)?v(a,!1,b):(G.dispatch("updateModel",e),c.showUnavailable(a.color)),
-1;var d=u.find(".item.itemNo"+a.thumbnailIndex);if(!c.isjQueryObjDefined(d)){var d=a.thumbnailIndex,d=u.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+d+" maintain-height"),g=J(e,b);d.find(".placeHolder").replaceWith(g);u.find(".list").append(d);k.loadImageManually(g)}A(d);G.dispatch("loadMagnifier");x(a);q.useIV&&c.isDefined(e.hiRes)&&d.css("cursor","pointer");a.isUserGenerated&&(d=C.getPreviousItem(),g=a.variant,c.isDefined(g)&&d.thumbnailIndex!==
a.thumbnailIndex&&(h.isEnabled&&E.logAltImgRequestServed(h),r.postCountMetric("ImageThumbnailSelectedVariant:"+g),0===g.indexOf("IG")&&(r.postCountMetric("IGImageSelectedVariant:"+g),r.postCountMetric("IGImageSelectedEvent:"+a.interaction))));k.trigger("dp:image-block:update",e)}}function N(a){var b=Math.max(w(a.color,C.getCurrentItem().variant),0),b=c.getImageHash(a.color,b,q);if(-1===b)return c.lazyLoadingRequired(a,C,q)?c.lazyLoadOnHoverEnabled(q)&&(K(".3",!0),c.spinner(u,!0),k.delay(function(){C.getCurrentEvent().data===
a&&v(a,!0)},500)):c.showUnavailable(a.color),-1;var e=p(b);A(e);k.trigger("dp:image-block:update",b)}function K(b,e){e?u.css("opacity",b):a("#imageBlock").css("opacity",b)}function v(a,e,m){b=e;g=m;var h=a.color,l=q.colorToAsin[h];if(l&&l.asin){var H={};H.params={asin:l.asin,productGroupID:q.productGroupID,color:h};H.success=function(H){H?(c.ajaxState(l.asin,"success"),q.colorImages[h]=H.colorImage,c.isDefined(q.spin360ColorEnabled)&&(q.spin360ColorEnabled[h]=H.enable360),h===a.color&&(e&&b?a===C.getCurrentEvent().data&&
(d(a),N(a)):(H={type:"updatedData",data:C.getCurrentItem(),onload:m||g},G.dispatch("updateView",H))),B.register(c.rankedImagesReadyEvent(l.asin))):c.ajaxState(l.asin,"fail")};H.error=function(){c.ajaxState(l.asin,"fail")};H.indicator=c.spinner(u);c.ajaxState(l.asin,void 0)&&"fail"!==c.ajaxState(l.asin,void 0)||(K(".3",e),n.load("/gp/product/features/apparel-main-image/ranked-images.html",H),c.ajaxState(l.asin,"sent"));return q.colorImages&&q.colorImages[h]}}function d(b,e){c.lazyLoadingRequired(b,
C,q)||(a("#imageBlock").css("opacity","1"),u.css("opacity","1"),c.spinner(u,!1),u.find("li").removeClass("selected"),a("#image-canvas-caption #canvasCaption").empty(),c.hideUnavailable(),e&&u.find(".list .item").remove())}function D(){var b=u.find(".item .imgTagWrapper"),d=c.getContainerHeight(e,q.holderRatio,q.holderMaxHeight);0<d&&(e.height(d),b.height(d));u.find("img.a-dynamic-image").each(function(){var b=a(this);b.data("a-manual-replacement")&&k.loadDynamicImage(this);var d=b.data("a-dynamic-image"),
d=c.getMaxDimensionsOfMainImage(d,e,q);b.css({"max-height":d[0]+"px","max-width":d[1]+"px"})})}function l(a){x(C.getCurrentItem(),"mouseenter"===a.type)}var m,q,C,G,L,u,e,b,g,z;return function(a,b,g,h){m=this;q=a;C=b;G=h;q.colorImages[q.landingAsinColor]=q.colorImages[q.defaultColor];m.render=function(a,b,g,m,h,l,f){u=g;L=m;e=h;z=y(b,a,l);l||(a=C.getCurrentItem(),c.lazyLoadingRequired(a,C,q)&&G.dispatch("updateModel",{data:{type:"lazy-loaded"}}));d(C.getCurrentItem(),!l);I(C.getCurrentItem(),f);return z};
m.update=function(a){var b=a.data;C.setCurrentEvent(a);"ingress"!==b.type&&d(a.data,!1);"swatchHover"===a.type?b.color===C.getCurrentItem().color?I(C.getCurrentItem()):a.captured||-1===N(b)||(a.captured=!0):"image"===b.type&&(b.interaction=a.type,b.isUserGenerated=!0,"mouseenter"===a.type&&r.postCountMetric("dpcc_imageThumbHovered_"+(b.thumbnailIndex+1)+"_"+z),I(b),q.usePeekHover&&"click"!==a.type||(c.selectGivenThumbnail(a.$declarativeParent,L),"click"===a.type&&(r.postCountMetric("dpcc_imageThumbClicked_total"),
r.postCountMetric("dpcc_imageThumbClicked_"+(b.thumbnailIndex+1)+"_"+z))))};q.overrideAltImageClickAction&&c.addTag("clickEnabledOnAltImages");G.register("imageHover",l);G.register("resize",D)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(k,a,c,n,r,h){function E(a){K?a.css("cursor","url('"+J.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),
a.css("cursor","zoom-in"))}function f(a){var d=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(c.isDefined(d))for(var d=d[1].split("_"),h=0;h<d.length;h++){var l=d[h].match(/^([A-Z]+)(\d+(\.\d+)?)$/);c.isDefined(l)&&(a[l[1]]=parseInt(l[2],10))}return a}function y(v,d){function D(){var a;d.useClickZoom?(a=d.offsetInClickZoom,a=[Math.min(1,Math.max(0,x[0]-(A[0]+a))/(A[2]-2*a)),Math.min(1,Math.max(0,x[1]-(A[1]+a))/(A[3]-2*a))]):a=z&&z.updatePosition();if(a&&g&&g.detailSize){var b=[g.detailSize[0]-
g.rect.width,g.detailSize[1]-g.rect.height];k.capabilities.rtl?g.detailImage.get(0).style.right=-(a[0]*b[0])+"px":g.detailImage.get(0).style.left=-(a[0]*b[0])+"px";g.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function l(a){return a.offsetParent().hasClass("a-dynamic-image-container")}function m(b){var e=Z?b.originalEvent.touches[0]||b.originalEvent.changedTouches[0]:"";x=Z?[e.pageX,e.pageY]:[b.pageX,b.pageY];if(k.capabilities.rtl){var c=a(p).width();x=Z?[c-e.pageX,e.pageY]:[c-b.pageX,b.pageY]}}
function q(a){Z&&a.preventDefault();m(a);d.useClickZoom?a=[A[0],A[1],A[0]+A[2],A[1]+A[3]]:(a=z?z.offset:v.offsetParent().offset(),a=J.acEnabled?[a.left,a.top,e.width()+a.left,e.height()+a.top]:[w[0]+a.left,w[1]+a.top,w[0]+w[2]+a.left,w[1]+w[3]+a.top]);x[0]<a[0]||x[1]<a[1]||x[0]>=a[2]||x[1]>=a[3]||J.acEnabled&&!l(v)?(d.fadeMagnifier?B||(B=!0,da=setTimeout(function(){C(!0)},500)):d.useClickZoom||C(),F&&(F=!1,clearTimeout(V))):(F||(F=!0,V=setTimeout(function(){n.postCountMetric("dppc_hoverZoomOpened");
r.isEnabled&&h.logHoverZoomRequestServed(r)},1E3)),d.fadeMagnifier&&B&&(B=!1,clearTimeout(da)),D())}function C(b){b&&u.suppressMagnifier(!0);if(R&&(g&&g.hide(),z&&(z.destroy(),z=null),R=!1,Z?(v.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),y(),b))v.one("click.magnifier touchstart.magnifier",function(a){G(a,!0)})}function G(b,c){c&&u.suppressMagnifier(!1);if(!R&&
!H&&(0===fa&&(n.postCountMetric("dppc_hoverTime",new Date-(p.ue&&p.ue.t0||0)),fa=1),I[ba]||(n.postCountMetric("dppc_hoverMain"),I[ba]=1),w=[v.position().left,v.position().top,v.width(),v.height()],ba&&(m(b),g?g.refit().show():g=new N,d.useClickZoom||(z=z||new P),A=g.getWindowSize(),D()),R=!0,Z?(v.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",q).bind("touchend.magnifier",C),a(document).trigger("engaged.magnifier")):(J.acEnabled?e.unbind("mousemove.magnifier"):v.unbind("mousemove.magnifier"),
a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",q)),c)){var h=a("#zoomWindow");if(0<h.length)h.one("click.magnifier touchend.magnifier",function(a){C(!0)})}}function y(){d.useHoverZoom&&(Z?v.bind("touchstart.magnifier touchmove.magnifier",G):J.acEnabled?l(v)&&e.bind("mousemove.magnifier",G):v.bind("mousemove.magnifier",G))}var u=this,e=v.offsetParent(),b={detailImageUrl:v.attr("data-old-hires"),location:"over",locationElement:v,prelaod:"ready",zIndex:50,offsetInClickZoom:50};d=
a.extend(b,d);d.adjustment=[10,0,-10,0];var g=null,z=null,x=null,w=null,A=null,U={"null":1,"":1,undefined:1},R=!1,H=!1,ba=d.detailImageUrl,Z=d.useHoverZoomIpad||0,fa=0,I={},P=function(){function b(a){var e=Math.round(Math.min(v.width(),g.rect.width/a));a=Math.round(Math.min(v.height(),g.rect.height/a));l.css({width:e,height:a});c=[e,a]}var e=this,c=[0,0],h=(g.detailSize&&g.detailSize[0]||5E8)/w[2],m=(g.detailSize&&g.detailSize[1]||5E8)/w[3],h=m>h?m:h;a("#magnifierLens").remove();var l=a("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});
d.generalImageUrls.zoomLensBackground&&l.css({backgroundImage:"url("+d.generalImageUrls.zoomLensBackground+")"});J.showMagnifierOnHover?E(l):l.css("cursor","pointer");e.updatePosition=function(){var a=[w[2]-c[0],w[3]-c[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(x[0]-c[0]/2-w[0]-e.offset.left)/a[0])),d=0>=a[1]?.5:Math.max(0,Math.min(1,(x[1]-c[1]/2-w[1]-e.offset.top)/a[1])),g=w[0]+Math.round(b*a[0]),a=w[1]+Math.round(d*a[1]);l.get(0).style.left=g+"px";l.get(0).style.top=a+"px";return[b,d]};e.destroy=function(){l.remove()};
e.offset=v.offsetParent().offset();b(h);e.updatePosition();l.appendTo(v.parent());g.detailImage[0].complete||g.detailImage.load(function(){var a=g.detailImage.width()/w[2];b(a);e.updatePosition()})};P.preload=function(){u.preload(d.generalImageUrls.lensBackgroundUrl)};var N=function(){function b(){var e={};if("over"===d.location){var e=d.useClickZoom,m={},H=a("#leftCol"),q=a("#centerCol"),f=a("#rightCol"),k=a("#hover-zoom-end"),D=a("#actionPanelContainer"),E=c.isjQueryObjDefined(H)?H.outerHeight():
q.outerHeight();m.top=c.isjQueryObjDefined(H)?H.offset().top:q.offset().top;m.bottom=E+m.top;m.right=c.isjQueryObjDefined(f)?f.offset().left:D.offset().left;m.left=e?0:H.offset().left+H.outerWidth();c.isjQueryObjDefined(k)&&k.offset().top>m.bottom&&(m.bottom=k.offset().top);e=m}else"right"===d.location&&(e=v.offset(),e={left:e.left+v.outerWidth(),top:e.top,right:e.left+v.outerWidth()+400,bottom:e.top+400});d.minHeightElement&&(e.bottom=Math.max(e.bottom,e.top+a(d.minHeightElement).outerHeight()));
e.bottom=Math.min(e.bottom,a(p).scrollTop()+a(p).height());e.left+=h[0];e.top+=h[1];e.right+=h[2];e.bottom+=h[3];e.width=e.right-e.left;e.height=e.bottom-e.top;d.enhancedHoverOverlay&&c.isDefined(p.pageXOffset)&&(m=a(p).width(),e.width=m-e.left+p.pageXOffset-18,e.height-=14);l.css({left:e.left,top:e.top,width:e.width,height:e.height});g.rect=e;return g}function e(a){var b=new Image;g.detailSize=[0,0];b.onload=function(){g.detailSize=[b.width,b.height];D()};b.src=a.attr("src");if(0<b.width&&0<b.height)g.detailSize=
[b.width,b.height];else if(d.detailImageSize)g.detailSize=d.detailImageSize;else{a=f(b.src);var c=w[2]/w[3];a.SS||a.AA?(a=a.SS||a.AA,g.detailSize=[a,a]):a.SX?g.detailSize=[a.SX,Math.round(a.SX/c)]:a.SY?g.detailSize=[Math.round(a.SY*c),a.SY]:a.SL&&(g.detailSize=1<=c?[a.SL,Math.round(a.SL/c)]:[Math.round(a.SL*c),a.SL])}}var g=this,h=d.adjustment;a("#zoomWindow").remove();var m={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:d.zIndex};d.enhancedHoverOverlay&&(m.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",
m.border="1px solid #949494",m.borderColor="rgb(148,148,148)");var l=a("\x3cdiv id\x3d'zoomWindow' /\x3e").css(m);d.fadeMagnifier&&l.fadeIn(200);d.useClickZoom&&(K?l.css("cursor",'url("'+d.zoomOutIcon+'"), auto'):(l.css("cursor","-webkit-zoom-out"),l.css("cursor","-moz-zoom-out"),l.css("cursor","zoom-out")));g.updateImage=function(b){b=a("\x3cimg id\x3d'detailImg' src\x3d'"+b+"'/\x3e").css("position","absolute");g.detailImage&&g.detailImage.remove();l.append(b);a(document).trigger("updated.magnifier");
g.detailImage=b;e(g.detailImage)};g.refit=function(){b();e(g.detailImage);return g};d.fadeMagnifier?(g.show=function(){l.fadeIn(200);return g},g.hide=function(){l.fadeOut(200);return g}):(g.show=function(){l.show();return g},g.hide=function(){l.hide();return g});g.destroy=function(){l.remove();return g};g.getWindowSize=function(){return[g.rect.left,g.rect.top,g.rect.width,g.rect.height]};g.updateImage(ba);b();l.appendTo(document.body)},B=!1,da,F=!1,V;u.preload=function(b){b=a.makeArray(b);for(var e=
b.length,c=0;c<e;c++)b[c]instanceof Array?u.preload(b[c]):"string"===typeof b[c]&&b[c]&&!U[b[c]]&&(U[b[c]]=new Image,U[b[c]].src=b[c])};u.changeImage=function(b,e){R&&C();ba=e;v.attr("src",b);u.preload(b);w=[v.position().left,v.position().top,v.width(),v.height()];e&&("immediately"===d.preload?u.preload(e,!0):a(p).ready(function(){u.preload(e)}),g?g.updateImage(e):v.attr("data-old-hires",e))};u.destroy=function(){J.acEnabled?e.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):
v.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");z&&z.destroy();z=null;g&&g.destroy();g=null};u.detailImage=function(){return g.detailImage};u.suppressMagnifier=function(a){H=a};u.isEngaged=function(){return R};u.engageMagnifier=G;u.disengageMagnifier=C;v[0].complete?y():v.one("load",y);u.preload(v.attr("src"));p.performance&&performance.now&&p.ue&&ue.count&&ue.count("MagnifierImageDownload",performance.now());if(d.preload){var ja=
d.detailImageUrl,b=function(){u.preload(ja,!0);d.useClickZoom||P.preload()},W=d.preload;W.constructor!==Array&&(W=[W]);for(var t=0;t<W.length;t++)if("immediately"===W[t])b();else if(a(p)[W[t]])a(p)[W[t]](b);else a(p).bind(W[t],b)}return u}function x(){if(J.useHoverZoom){var f={adjustment:[0,0,1,1],generalImageUrls:J.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:199,useHoverZoomIpad:J.useHoverZoomIpad,useHoverZoom:J.useHoverZoom,useClickZoom:J.useClickZoom,fadeMagnifier:J.fadeMagnifier,
zoomOutIcon:J.staticImages.zoomOutCur,enhancedHoverOverlay:J.enhancedHoverOverlay||J.atfEnhancedHoverOverlay};I&&(I.destroy(),I=void 0);var d=N.find(".image.item.selected img[data-old-hires]").not("[data-old-hires\x3d'']");c.isjQueryObjDefined(d)?J.useClickZoom?(d.one("click.loadmagnifier touchstart.loadmagnifier",function(a){I=new y(d,f);I.engageMagnifier(a,!0)}),K?d.css("cursor",'url("'+J.staticImages.zoomInCur+'"), auto'):(d.css("cursor","-webkit-zoom-in"),d.css("cursor","-moz-zoom-in"),d.css("cursor",
"zoom-in"))):I=new y(d,f):r.isEnabled&&h.logHoverZoomApplicability(a,r)}}var w,J,P,A,I,N,K=navigator.userAgent.match(/msie|trident/i);return function(a,c,h,l){w=this;J=a;P=c;r.refToModel=P;A=l;w.render=function(a,c,d,h,l,f){N=d;I&&(I.destroy(),I=void 0)};w.update=function(a){};A.register("loadMagnifier",x);A.register("resize",x)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(k,a,c,n){function r(a,h,k){a=(a=k?k:c.getColorFromState(h.getState().hovered_variations,
f))&&""!==a?a:f.defaultColor;x.dispatch("updateView",{type:"swatchHover",data:{color:a}});n.postCountMetric("swatchHover")}function h(a,h,k,E){a=(a=E?E:c.getColorFromState(h.getState().selected_variations,f))&&""!==a?a:f.defaultColor;a===y.getCurrentItem().color?"function"===typeof k&&k():(x.dispatch("updateSelection",{type:"swatchClick",data:{color:a},onload:k}),n.postCountMetric("swatchClick"))}var E,f,y,x;return function(a,c,n,A){E=this;f=a;y=c;x=A;k.on("image-block-twister-swatch-hover",r);k.on("image-block-twister-swatch-click",
h);E.render=function(a,c,h,f,d){};E.update=function(a){}}});"use strict";B.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",function(k,a,c,n,r,h,E){function f(b,e,c,g){!d.autoplayVideo||Q||d.useChromelessVideoPlayer?!n.isjQueryObjDefined(b.find(".a-button-selected"))&&(c=D.getCurrentItem(),!g||d.prioritizeVideos||"chromeless-video"===c.type&&d.autoplayVideo)&&(g=n.getVideoHash(c.color,0,d),-1!==g&&(e+=0,l.dispatch("updateModel",
{data:{index:0,thumbnailIndex:e,variant:g.variant,type:d.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),e=b.find(".item").get(e),n.selectGivenThumbnail(a(e),b))):(n.selectGivenThumbnail(b.find("img:last"),b),n.fadeToThumbnail(b.find("img").length-1,G,b))}function y(a){var b=D.getCurrentItem().color;if(d.useChildVideos&&!d.colorToVideo[b]){var e=function(){if(a){d.colorToVideo[b]=a;var e={type:"updatedData",data:D.getCurrentItem()};l.dispatch("updateView",e)}};d.lazyLoadExperienceDisabled?
e():B.when(n.rankedImagesReadyEvent(d.colorToAsin[b].asin)).execute(function(){e()})}}function x(a){if(!d.useChildVideos)return n.lazyLoadingRequired(D.getCurrentItem(),D,d)?void 0:d.videos;if(d.colorToVideo[a])return d.colorToVideo[a];var b=d.colorToAsin[a];if(b&&b.asin){var e={};e.params={asin:b.asin,productGroupID:d.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:d.useChromelessVideoPlayer,isUDP:d.isUDP};d.isDPXFeatureEnabled||(e.success=function(a){y(a)},r.load("/gp/product/features/apparel-main-image/videos.html",
e));return d.colorToVideo&&d.colorToVideo[a]}}function w(){l.dispatch("selectThumbnail",n.useTabbedImmersiveView(d)?1:0)}function J(b,e,g,d){return c.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],streamingUrls:e.url,swfUrl:g.swfUrl,foresterMetadataParams:g.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=n.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";h.postCountMetric("dppc_chromelessVideo:"+
a)},playing:function(){b.parent().css("z-index",8)},videounsupported:function(){w();h.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){w();h.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){u.seek(0)}},cuePoints:[{values:e.durationSeconds-1,type:"position",callback:function(e,c,g){e=g.durationSeconds-g.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*e,.1,function(){b.parent().css({"background-color":"transparent",
"z-index":-1});w();a(this).show().css("opacity",1)})}}]})}function p(c){if("chromeful-video"===c.type||"chromeless-video"===c.type){var g=n.getVideoHash(c.color,c.index,d);if(-1===g)return-1;if("chromeful-video"===c.type){c=G.width()/G.height();var h=parseInt(g.videoWidth,10),l=parseInt(g.videoHeight,10);n.updateAspectRatio(c,h,l,q);u?(u.show(),n.loadMediaIntoAiry(u,g,e,d.tabletWeb)):u=d.tabletWeb?z:n.createAiryInstanceForChromeful(q,g,e,null,d.autoplayVideo,G,C,m);b:if(n.useTabbedImmersiveView(d)){if(1<
n.getVideosCount(D.getCurrentItem().color,d)){if(n.isDefined(L)){C.show();break b}L=a('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(d.staticStrings.watchMoreVideos);C.find("#videoCaption").append(L);k.declarative.create(L,"videoIngressClick",b)}n.playVideoInImmersiveView(d,D.getCurrentItem().color)&&(k.declarative.create(q,"videoIngressClick",b),q.attr&&q.attr("data-ux-click",""),q.children().css("z-index","-1"),q.css("display","inline-block"))}else C.find("#videoCaption").text(d.staticStrings.playVideo),
C.show();g=u;d.autoplayVideo&&g&&!Q&&(n.toggleVideoCaption(C),g.setVolume(0),g.show(),g.play(),Q=!0)}else u?(u.show(),n.loadMediaIntoAiry(u,g,e,d.tabletWeb),u.play(),C.show()):(u=J(q,g,e))&&u.play()}}function A(e,c,g){var l=x(c);c=e;n.isDefined(l)&&0<l.length&&d.alwaysIncludeVideo&&e===d.maxAlts&&(m.find(".item:last").remove(),e--);n.isDefined(l)&&(a.each(l,function(a,c){if(e<d.maxAlts){var g=d.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",f={type:g,index:a,thumbnailIndex:e,variant:c.variant};
b={type:"video-ingress",index:a,thumbnailIndex:e,variant:c.variant};n.useTabbedImmersiveView(d)&&("chromeful-video"===g&&(T+=" videoBlockIngress  videoBlockDarkIngress",c.thumb=c.thumb.replace("_PKmb-play-button-overlay-thumb","")),d.altsOnLeft||(T+=" a-align-top"));n.createThumbnail(f,c.thumb,m,T);if(n.useTabbedImmersiveView(d)){I(m.find(".videoBlockIngress img"),d.videoIngressATFSlateThumbURL);var f=1<l.length?"multiple-videos":"one-video",q=1<l.length?l.length+" "+d.staticStrings.multipleVideos:
d.staticStrings.singleVideo;q&&m.find(".videoBlockIngress").append(m.find("#videoCount_template").clone().text(q).attr("id","videoCount")).addClass(f)}M||(M=!0,h.postCountMetric("chromeless-video"===g?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));e++}if(n.useTabbedImmersiveView(d))return!1}),f(m,c,e,g));return e}function I(a,b){var e=a.attr("src");if(e&&b){a.attr("src",b);var c=new Image;c.onload=function(b){a.attr("src",e)};c.src=e}}function N(a){u&&u.pause();a.data=b;a.clickTimeStamp=
a.$event.timeStamp;var e="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";l.dispatch("imageClick",a);h.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);h.postCountMetric(e)}function K(a){z=a.airy;z.hide=function(){z.pause();k.$("#main-video-container").find(".vse-airy-container").hide()};z.show=function(){k.$("#main-video-container").find(".vse-airy-container").show();z.play()};z.getMediaSourceInfo=function(){return n.getMediaSourceInfo()}}var v,d,D,l,m,q,C,G,L,u,
e,b,g,z,M=!1,Q=!1,T="videoThumbnail";return function(c,f,H,z){v=this;d=c;D=f;l=z;e=d.airyConfig;d.colorToVideo={};d.colorToVideo[d.landingAsinColor]=d.colorToVideo[d.defaultColor]=d.videos;v.render=function(b,e,c,l,h,f){m=l;q=h.find("#main-video-container");C=q.parent().find("#video-canvas-caption");G=a("#main-image-container");d.useChromelessVideoPlayer||q.addClass("chromeful-container");g=A(e,b,f);p(D.getCurrentItem());n.useTabbedImmersiveView(d)&&k.declarative("videoIngressClick",["click"],N);
b=D.getCurrentItem().color;e=n.getVideoHash(b,0,d);-1!==e&&d.tabletWeb&&(b=n.getNilgiriServiceAjaxRequest(d,b,e),E.get(k,"#main-video-container",b,function(){k.$("#main-video-container").find(".vse-airy-container").hide()},function(){k.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));return g};v.update=function(a){var e=a.data;"ingress"!==e.type&&u&&(u.hide(),q.parent().css("z-index",-1),C.hide());if("swatchHover"===a.type)e.color===D.getCurrentItem().color?p(D.getCurrentItem()):
a.captured||n.lazyLoadingRequired(e,D,d)&&!n.lazyLoadOnHoverEnabled(d)&&p(D.getCurrentItem());else if("chromeful-video"===e.type||"chromeless-video"===e.type)"mouseenter"===a.type&&h.postCountMetric("dpcc_videoThumbHovered_"+(e.thumbnailIndex+1)+"_"+g),p(e),d.usePeekHover&&"click"!==a.type||(n.selectGivenThumbnail(a.$declarativeParent,m),"click"===a.type&&n.useTabbedImmersiveView(d)&&(h.postCountMetric("dpcc_videoThumbClicked_"+(e.thumbnailIndex+1)+"_"+g),b.action="videoIngressClick",b.clickTimeStamp=
a.$event.timeStamp,b.$event=a.$event,b.$currentTarget=a.$currentTarget,l.dispatch("videoIngressClick",b),h.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp)))};if(d.isDPXFeatureEnabled)k.on("triggerVideoAjax",y);k.on("vseAiry",K)}});"use strict";B.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(k,a,c,n,r,h,E,f){function y(a){return a.hiRes||a.large||
a.main[a.main.length-1]}function x(){t.find("#ivTitle").click(function(){W.hide()})}function w(){O=Oa?{type:"360-spin"}:V.getCurrentItem()}function J(){var a=t.find("#ivStage"),b=W.$container.find(".a-popover-wrapper"),e=b.find(".a-popover-inner"),b=b.height()-f.getDimension(e,"padding-top")-f.getDimension(e,"padding-bottom");t.css("height",b);var e=t.find("#ivTitle").outerHeight(!0),c=t.find("#ivVariationSelection").outerHeight(!0),g=t.find("#ivMediaSelection").outerHeight(!0),d=t.find("#ivThumbs"),
l=f.getDimension(d,"margin-top")+f.getDimension(d,"margin-bottom");d.css("height",b-e-c-g-l);t.find("#ivLargeImage").css("height",b);a.css("width",t.width()-f.getDimension(t,"padding-left")-f.getDimension(t,"padding-right")-t.find("#ivThumbColumn").width()-f.getDimension(a,"margin-left")-f.getDimension(a,"margin-right"))}function P(){t.find("#ivMediaSelect").change(function(){var b=a(this).val();"all"===b?(t.find("#ivVideoList").hide(),t.find("#ivThumbs").show(),t.find(".ivThumbVideo").show(),"chromeful-video"===
O.type&&t.find("#ivVideo_"+O.index).click()):"images"===b?(t.find("#ivVideoList").hide(),t.find("#ivThumbs").show(),t.find(".ivThumbVideo").hide(),"chromeful-video"===O.type&&(0===aa&&0===X?t.find("#iv360").click():0===aa?t.find("#ivHeroImage_0").click():t.find("#ivImage_0").click())):"videos"===b&&(t.find("#ivVideoList").show(),t.find("#ivThumbs").hide(),"chromeful-video"!==O.type?t.find("#ivVideoList_0").click():t.find("#ivVideoList_"+O.index).click())})}function A(){var a=t.find("#ivStage").find("#ivLargeImage"),
b=a.width(),e=a.height(),c=a.find(".fullscreen");c.removeAttr("style");var g=c.width(),d=c.height();0<c.length&&(c[0].naturalWidth&&(g=c[0].naturalWidth),c[0].naturalHeight&&(d=c[0].naturalHeight));a.css("cursor","auto");var g=0===g?1:g,d=0===d?1:d,l=Math.min(b/g,e/d),h=d*l,m=g*l;1>l?(Pa?a.css("cursor","url('"+F.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),za=!0):za=!1;g=Math.min(m,g);d=Math.min(h-20,d);c.css({"margin-top":(e-
d)/2,"margin-left":(b-g)/2,height:d,width:g});a.css("visibility","visible");Aa=!1}function I(a){var b=t.find("#ivLargeImage");b.css("visibility","hidden");b.empty();f.animateStageIn(b);b.append(a);A()}function N(){Y&&Y.pause();t.find("#ivLarge360").css("display","none");t.find("#ivLargeVideo").css("display","none");t.find("#ivLargeImage").css("display","none");q()}function K(b){N();t.find("#ivLargeImage").css("display","block");var e;"hero-image"===b?c.isDefined(ca)&&(e=y(ca[O.index])):c.isDefined(ka)&&
(e=y(ka[O.index]));if(c.isDefined(e)){t.find(".fullscreen").remove();var g=a("\x3cimg\x3e").attr("src",e).addClass("fullscreen"),d=t.find("#ivLargeImage");f.animateStageOut(d,function(){g.load(function(){I(g)});if(g[0].complete)I(g);else{d.empty();var b=(d.height()-104)/2,e=(d.width()-80)/2;a("\x3cimg\x3e").attr("src",F.staticImages.spinner).css({position:"relative",top:b+"px",left:e+"px"}).appendTo(d)}})}}function v(){var a=parseInt(O.index,10)+1;a>=la.length||t.find("#ivVideo_"+a).click()}function d(){var a;
c.isDefined(la)&&(a=la[O.index]);if(c.isDefined(a)){N();var b=t.find("#ivLargeVideo").css("display","block");Y?(Y.isDetached()&&Y.attach(b[0]),c.loadMediaIntoAiry(Y,a,wa,F.tabletWeb),Y.show()):(Y=c.createAiryInstanceForChromeful(b,a,wa,"ImmersiveView"),wa.enableContinuousPlay&&Y.bind("ended",v));Y.play({isAsync:!0})}}function D(){w();var a;a="hero-image"===O.type?t.find("#ivHeroImage_"+O.index):"image"===O.type?t.find("#ivImage_"+O.index):"chromeful-video"===O.type||"chromeless-video"===O.type?t.find("#ivVideo_"+
O.index):"360-spin"===O.type?t.find("#iv360"):c.isDefined(ca)?t.find("#ivHeroImage_"+O.index):t.find("#ivImage_"+O.index);c.isjQueryObjDefined(a)||(a=t.find("#ivImage_0"));l(a)}function l(a){t.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(O.type="chromeful-video",O.index=a.attr("id").split("_")[1],d()):a.hasClass("ivHeroImage")?(O.type="hero-image",O.index=a.attr("id").split("_")[1],K(O.type)):a.hasClass("iv360Image")?(O.type="360-spin",O.index=0,m()):
(O.type="image",O.index=a.attr("id").split("_")[1],K(O.type))}function m(){N();t.find("#ivLarge360").css("display","block");e();var a=t.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});f.animateStageIn(a)},200);G();r.postCountMetric("dppc_click360");ta=Date.now()}function q(){0<ta&&(C("dppc_duration360",Date.now()-ta),ta=0)}function C(a,b){p.ue&&p.ue.count(a,b)}function G(){if(0<pa){var a=t.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}
function L(b,e){if(pa<b.length){var c=a("\x3cimg /\x3e").css({display:"block",width:6*na+"px",height:sa+"px"});c.hide();e.append(c);c.get(0).onload=function(){e.closest(document.documentElement).length&&(pa++,1===pa&&(G(),0<ta&&C("dppc_loadTime360",Date.now()-ta)),0<Ga&&C("dppc_perSpriteloadTime360",Date.now()-Ga),t.find("#iv360Spinner").hide(),c.show(),xa=5*S.imageLocations[Math.floor(ya/S.imageLocations[0].length)][ya%S.imageLocations[0].length],L(b,e))};c.attr("src",b[pa].replace(/(\._SP)\d+(,)\d+/,
"$1"+ua+"$2"+va));Ga=Date.now()}}function u(a){if(c.isDefined(S.spriteWidthSizes)&&0<S.spriteWidthSizes.length){var b=S.spriteWidthSizes,e=b.length,g=b[0],d=b[e-1];if(a<=g)return g;if(a>d)return d;for(g=0;g<e;g++)if(a>b[g]&&a<=b[g+1])return b[g+1]}else return a}function e(){var e=t.find("#ivLarge360");e.children("#image-360-sprites").length||(e.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),e.css({"margin-left":0,"margin-top":0,width:e.parent().width(),height:e.parent().height(),overflow:"hidden",
position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",F.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(e),Ha=!0,b())}function b(){if(c.isDefined(S.spriteURLs)&&c.isDefined(t)&&Ha&&!Ia){var b=t.find("#ivLarge360"),e=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,
display:"block"});c.isDefined(S.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",S.staticImages.hint360).appendTo(e);a("\x3cdiv\x3e").css({"text-align":"center"}).text(F.staticStrings.dragToSpin).appendTo(e);e.appendTo(b);var e=S.imageWidth,d=S.imageHeight,l=b.parent().width(),h=b.parent().height(),m=0,f=0;e/d>l/h?(ua=u(l),va=Math.round(d/e*ua),na=Math.ceil(l),sa=Math.ceil(va/ua*l),f=(h-sa)/2):(va=u(h),ua=Math.round(e/d*va),sa=Math.ceil(h),
na=Math.ceil(ua/va*h),m=(l-na)/2);b.css({"margin-left":m,"margin-top":f,width:na+"px",height:sa+"px",overflow:"hidden",position:"relative"});b.children("#image-360-sprites").css("width",6*na+"px");L(S.spriteURLs,t.find("#image-360-sprites"),0);e=t.find("#ivLarge360");e.bind("mousedown",Q);e.bind("touchstart",g);e.bind("touchmove",z);e.bind("touchend",M);a(document).bind("mousemove",T);a(document).bind("mouseup",U);c.isDefined(F.staticImages.grab)&&b.css("cursor","url('"+F.staticImages.grab+"'), auto");
Ia=!0}}function g(a){Ba=!0;Ja=a.originalEvent.targetTouches[0].clientX}function z(a){Ba&&(R(a.originalEvent.targetTouches[0].clientX-Ja),Ja=a.originalEvent.targetTouches[0].clientX)}function M(a){Ba&&(Ba=!1)}function Q(a){Ca=!0;Ka=a.originalEvent.clientX;c.isDefined(F.staticImages.grabbing)&&(a=t.find("#ivLarge360"),a.css("cursor","url('"+F.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+F.staticImages.grabbing+"'), auto"));return!1}function T(a){Ca&&(R(a.originalEvent.clientX-
Ka),Ka=a.originalEvent.clientX)}function U(a){Ca&&(Ca=!1,c.isDefined(F.staticImages.grab)&&(a=t.find("#ivLarge360"),a.css("cursor","url('"+F.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function R(a){for(a=xa-=a/na*180;0>a;)a+=360;for(;360<a;)a-=360;xa=a;var b;a=360;for(var e=0;e<pa;e++)for(var g=0;g<S.imageLocations[e].length;g++){var d=Math.abs(xa-5*S.imageLocations[e][g]);d<a&&(a=d,b=e*S.imageLocations[0].length+g)}b!==ya&&(a=Math.floor(b/S.imageLocations[0].length),
a!==Math.floor(ya/S.imageLocations[0].length)&&(c.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),e=t.find("#image-360-sprites").children(),La.drawImage(e[a],0,0)),a=t.find(".iv360Hint").not(".iv360HintFaded"),c.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ya=b;a=b%S.imageLocations[0].length*-1*na;b=-1*Math.floor(b/S.imageLocations[0].length)*sa;e=t.find("#ivLarge360").children("#image-360-sprites");e.css("-webkit-transform","translate3d("+a+"px, "+
b+"px, 0)");e.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function H(){t.delegate(".ivThumb","click",function(){var b=a(this);l(b)});t.delegate(".ivThumbVideoListOuter","click",function(){t.find(".ivThumbVideoListOuter").removeClass("selected");var b=a(this);b.addClass("selected");O.type="chromeful-video";O.index=b.attr("id").split("_")[1];d()})}function ba(){Y&&!Y.isDetached()&&(wa.volume=Y.getVolume(),Y.detach(),!document.all||p.atob||document.addEventListener||(Y=null));t.find("#ivLargeImage").empty();
q()}function Z(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function fa(b){var e=qa.left-(b.pageX-Da[0])*Ea;k.capabilities.rtl&&(e=qa.left-(a(p).width()-b.pageX-Da[0])*Ea);b=qa.top-(b.pageY-Da[1])*Ea;e=Z(e,Fa.left);b=Z(b,Fa.top);t.find(".fullscreen").css({left:e,top:b})}function ga(){t.delegate("#ivLargeImage","click",function(a){if(Aa)A();else if(za){t.find(".fullscreen").removeAttr("style");if(za){var b=t.find("#ivLargeImage"),e=b.find(".fullscreen");Pa?b.css("cursor","url('"+F.staticImages.zoomOut+
"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Aa=!0;var c=t.find("#ivLargeImage");Fa.left=c.width()-e.width();Fa.top=c.height()-e.height();var c=b.height()/2,g=b.width()/2;Da=[b.offset().left+g,b.offset().top+c];qa.top=c-e.height()/2;qa.left=g-e.width()/2;e.css({position:"relative",left:qa.left,top:qa.top});Ea=Math.max(e.height()/b.height(),e.width()/b.width())}fa(a)}});t.delegate("#ivLargeImage","mousemove",function(a){Aa&&fa(a)})}function ha(b){if(c.isImmersiveViewEnabled(F,
V.getCurrentItem().color))if(Ma){var e=b.$event.originalEvent;e.acknowledge&&e.acknowledge(b.$currentTarget[0]);Oa=c.isDefined(b)&&"button-360-click"===b.action;h.isEnabled&&E.logImmersiveViewRequestServed(h);r.postCountMetric("dppc_immersiveViewOpened");if(c.isDefined(W))W.show();else{b=a("#auiImmersiveViewDiv");var e=a(p).height()-150,g=a(p).width()-75;W=Ma.create(b,{name:"immersiveView",activate:"onclick",width:g,height:e,popoverLabel:"ImmersiveView",hideHeader:!0});b.click()}if(Na){t=a("#ivMain");
b=V.getCurrentItem().color;ka=F.colorImages[b];ca=F.heroImage[b];la=F.useChildVideos?F.colorToVideo[b]:F.videos;ra=ea()&&F.spin360ColorEnabled[b];S=ea()?F.spin360ColorData[b]:void 0;w();ia=X=oa=aa=0;c.isDefined(ca)&&(X=ca.length);c.isDefined(ka)&&(aa=ka.length);c.isDefined(la)&&(oa=la.length);ra&&(ia=1);f.populateTitle(t.find("#ivTitle"),45,F);f.populateVariationSelection(t.find("#ivVariationSelection"));b=t.find("#ivMediaSelect");0===aa+ia||0===oa?(b.parent().hide(),t.find("#ivThumbs").addClass("noMediaSelection")):
(b.empty(),a("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(F.staticStrings.allMedia+" ("+(X+aa+ia+oa)+")").appendTo(b),a("\x3coption/\x3e").attr("value","images").text(F.staticStrings.images+" ("+(X+aa+ia)+")").appendTo(b),a("\x3coption/\x3e").attr("value","videos").text(F.staticStrings.videos+" ("+oa+")").appendTo(b),b.parent().show(),b.val("all"));b=t.find("#ivThumbs");b.find(".ivRow").not(".placeholder").remove();for(var e=X+aa+oa+ia,d=g=0;g<e;)for(var l=b.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(b),
m=0;3>m&&g<e;m++,g++,d++)if(d<X){var q=ca[g].thumb,H=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+g).appendTo(l);H.find(".ivThumbImage").css("background",'url("'+f.getResizedThumbnailURL(q)+'") center no-repeat')}else if(d>=X&&d<aa+X)q=ka[g-X].thumb,H=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(g-X)).appendTo(l),H.find(".ivThumbImage").css("background",'url("'+f.getResizedThumbnailURL(q)+
'") center no-repeat');else if(d>=X+aa&&d<aa+X+ia)H=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(l),H.find(".ivThumbImage").css("background",'url("'+(c.isDefined(F.staticImages.icon360)?f.getResizedThumbnailURL(F.staticImages.icon360,!0):"")+'") center no-repeat');else if(q=la[g-aa-X-ia],H=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(g-aa-X-ia)).appendTo(l),H.find(".ivThumbImage").css("background",
'url("'+q.thumbUrl+'") center no-repeat'),c.isDefined(q)){var D={position:"triggerTop"},z=t.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");z.find(".ivVideoPopoverTitle").text(q.title);z.find(".ivVideoPopoverDuration").text(q.durationTimestamp);D.inlineContent=z[0];k.declarative.create(H,"a-tooltip",D)}b=t.find("#ivVideoList");b.find(".ivThumbVideoListOuter").not(".placeholder").remove();e=b.find(".placeholder");for(g=0;g<oa;g++)d=la[g],l=e.clone().removeClass("placeholder").appendTo(b),
l.attr("id","ivVideoList_"+g),l.find(".ivThumbImage").css("background",'url("'+d.thumbUrl+'") center no-repeat'),l.find(".ivThumbTitle").text(d.title),l.find(".ivThumbDuration").text(d.durationTimestamp);t.find("#ivLarge360").empty();pa=0;Ia=Ha=!1;wa=F.airyConfig;Na=!1;Qa()}}else p.performance&&performance.now&&p.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else r.postCountMetric("immersiveViewNotExistsClickCount")}function ma(a){var e=
F.colorToAsin[a],g={},d=500;if(e&&e.asin){g.params={asin:e.asin};var l="360"+e.asin,h=Date.now();g.success=function(e){C("dppc_asyncRequestTime360",Date.now()-h);e&&c.isDefined(e.spin360.spin360Model)?(c.ajaxState(l,"success"),F.spin360ColorData[a]=e.spin360.spin360Model,a===V.getCurrentItem().color&&(S=F.spin360ColorData[a],b())):g.error()};g.error=function(){r.postCountMetric("dppc_asyncFailed360");C("dppc_asyncRequestTime360",Date.now()-h);d*=2;16E3>=d?setTimeout(function(){h=Date.now();n.load("/gp/product/features/apparel-main-image/360.html",
g)},d):c.ajaxState(l,"fail")};c.ajaxState(l)&&"fail"!==c.ajaxState(l)||(n.load("/gp/product/features/apparel-main-image/360.html",g),c.ajaxState(l,"sent"))}}function ea(){return c.isDefined(F.spin360ConfigEnabled)&&F.spin360ConfigEnabled}var da,F,V,ja,W,t,ca,ka,la,X,aa,oa,ia,O,Y,wa,S,ra,na,sa,va,ua,Ka,Ja,Oa=!1,Ha=!1,Ia=!1,xa=0,ya=0,ta=0,Ga=0,Ca=!1,Ba=!1,pa=0,La,Pa=navigator.userAgent.match(/msie|trident/i),Na=!0,Aa=!1,za=!1,Fa={},qa={},Ea,Da,Ma;B.when("a-modal").execute(function(a){Ma=a});var Qa=
k.once(function(){P();H();ga();k.on("a:popover:afterUpdatePosition:immersiveView",J);k.on("a:popover:afterShow:immersiveView",D);k.on("a:popover:afterHide:immersiveView",ba);x()});return function(b,e,g,d){da=this;F=b;V=e;h.refToModel=V;ja=d;ea()&&(F.spin360ColorData[F.landingAsinColor]=F.spin360ColorData[F.defaultColor],F.spin360ColorEnabled[F.landingAsinColor]=F.spin360ColorEnabled[F.defaultColor]);c.isDefined(F.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",
f.addStyleCodeToURL(F.staticImages.icon360,"_FMpng_RI_"));da.render=function(a,b,e,g,d,l){Na=!0;ea()&&F.spin360ColorEnabled[a]&&!c.isDefined(F.spin360ColorData[a])&&(F.spin360ColorData[a]={},ma(a));c.isImmersiveViewEnabled(F,V.getCurrentItem().color)&&ea()&&F.spin360ColorEnabled[a]&&(b===F.maxAlts&&(a=g.find(".item.imageThumbnail"),e=g.find(".item.videoThumbnail"),c.isDefined(e)&&1<e.length?e.last().remove():a.last().remove(),b--),a=g.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),
k.declarative.create(a,"button-360-click"),g.append(a),b++,r.postCountMetric("dppc_display360"));return b};da.update=function(a){};c.isImmersiveViewEnabled(F,V.getCurrentItem().color)||c.addTag("immersiveViewNotAvailable");ja.register("imageClick",ha);ja.register("button360Click",ha)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(k,a,c,n,r,h,E){function f(){var c=
P.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),d=c.find(".a-popover-inner"),c=c.height()-E.getDimension(d,"padding-top")-E.getDimension(d,"padding-bottom");a("#iv-tab-view-container").css("height",c);N=a("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==a(this).css("display")}).length;1<N?(a("#iv-tab-view-container ul.iv-tab-views li").parent().show(),d=a("#iv-tab-view-container ul.iv-tab-views li").parent().height(),c-=d):a("#iv-tab-view-container ul.iv-tab-views li").parent().hide();
a("#iv-tab-view-container .iv-tab-content").css("height",c);k.trigger("dp:image-block:immersive-view:resize")}function y(){k.trigger("dp:image-block:immersive-view:reset")}function x(l){if(c.isImmersiveViewEnabled(J,P.getCurrentItem().color))if(v){var m=l.$event.originalEvent;m.acknowledge&&m.acknowledge(l.$currentTarget[0]);r.isEnabled&&h.logImmersiveViewRequestServed(r);n.postCountMetric("dppc_immersiveViewOpened");c.isDefined(l)&&("button-360-click"===l.action?a("#iv360TabHeading").click():"videoIngressClick"===
l.action?(K=l.clickTimeStamp,a("#ivVideosTabHeading").click()):"showroomIngressClick"===l.action?(K=l.clickTimeStamp,a("#ivShowroomTabHeading").click()):a("#ivImagesTabHeading").click());m=P.getImmersiveViewModalInstance();if(c.isDefined(m))m.show();else{l=a("#auiImmersiveViewDiv");var m=Math.min(Math.max(a(p).height()-150,540),1080),q=Math.min(Math.max(a(p).width()-75,990),1980),m=v.create(l,{name:"immersiveView",activate:"onclick",width:q,height:m,popoverLabel:"ImmersiveView",hideHeader:!0});P.setImmersiveViewModalInstance(m);
l.click()}I&&(I=!1,d(),k.trigger("dp:image-block:immersive-view:init"))}else p.performance&&performance.now&&p.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else n.postCountMetric("immersiveViewNotExistsClickCount")}var w,J,P,A,I=!0,N=0,K,v;B.when("a-modal").execute(function(a){v=a});var d=k.once(function(){k.on("a:popover:afterUpdatePosition:immersiveView",f);k.on("a:popover:afterShow:immersiveView",f);k.on("a:popover:afterHide:immersiveView",
y)}),D=k.once(function(){var c=a("#iv-tab-view-container ul.iv-tab-views li");c.bind("click",function(d){var h=c.filter(".iv-active");h.attr("id")!==a(this).attr("id")&&k.trigger("dp:ivTabs:"+h.find("a").attr("data-iv-tab-view")+":deselect",d);c.removeClass("iv-active");a(this).addClass("iv-active");a("#iv-tab-view-container .iv-tab-content").hide();h=a(this).find("a").attr("data-iv-tab-view");a("#"+h).show();"ivVideosTab"===h&&(d.clickTimeStamp=K||d.timeStamp);k.trigger("dp:ivTabs:"+h+":select",
d);n.postCountMetric("dppc_"+h);return!1})});return function(a,d,h,f){w=this;J=a;P=d;r.refToModel=P;A=f;w.render=function(a,c,d,e,b,g){n.postCountMetric("dpcc_altThumbs_"+c);I=!0};w.update=function(a){};w.getTitle=function(){};w.getVariationSelectionInfo=function(){};D();c.isImmersiveViewEnabled(J,P.getCurrentItem().color)||c.addTag("immersiveViewNotAvailable");A.register("imageClick",x);A.register("button360Click",x);c.useTabbedImmersiveView(J)&&(A.register("videoIngressClick",x),A.register("showroomIngressClick",
x))}});"use strict";B.when("A").register("ImageBlockLoader",function(k){return{load:function(a,c){c=c||{};c.timeout=c.timeout||4E3;k.ajax(a,c)}}});"use strict";B.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(k,a,c,n,r,h,E,f){function y(a){return null!==a&&"undefined"!==typeof a}function x(e){var b=0;a.each(e,function(a,e){var c=parseInt(e[1],10);c>b&&(b=c)});return b}function w(e){var b=0;a.each(e,
function(a,e){var c=parseInt(e[0],10);c>b&&(b=c)});return b}function J(a,b,c){b=b.width();if(c.naturalMainImageSize)return b;a=x(a);0<a&&(b=Math.min(b,a));return b}function B(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=w(a);0<a&&(b=Math.min(b,a));return b}function A(e){var b;a.each(e,function(a,e){y(b)||(b=e[1]/e[0])});return b||1}function I(a,b,c){b.fadeTo(500,0,function(){K(a,c);b.fadeTo(500,1)})}function N(a){a&&a.toggle()}function K(e,b){var c=b.find("img");y(c[e])&&a(c[e]).click()}
function v(a,b){u[a]=b?b:u[a];return u[a]}function d(e,b,c){c=c||L;c=c.colorImages;if(1>c.length||!y(c[e])||!y(b))return-1;var d=-1;a.each(c[e],function(a,e){e.variant===b&&(d=a)});return d}function D(e,b,c){c=c||L;c=c.colorImages;return!(y(c)&&y(c[e])&&y(c[e][b])&&y(c[e][b].main))||1>a.map(c[e][b].main,function(a,b){return b}).length?-1:c[e][b]}function l(a,b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",b/a*100+"%"):d.css("height",a/b*100+"%"))}function m(e,b){var c;if(c=
e.useIV)c=e.colorImages&&e.colorImages[b]&&0<e.colorImages[b].length?!0:!1;E.isEnabled&&(E.IVApplicaple=c,f.logImmersiveViewApplicability(a,E));return c}var q,C,G,L=a.extend(!0,{},r,h),u={};return{isDefined:y,isDefinedAndEmpty:function(a){return y(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return y(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return y(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==
a.length},getAspectRatio:A,getMaxHeightOfMainImage:B,getMaxWidthOfMainImage:J,getMaxDimensionsOfMainImage:function(a,b,c){if(c.acEnabled)return[b.height(),b.width()];var d=B(a,b,c);b=J(a,b,c);a=A(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,b,c){var d=a.get(0);a=0;if(y(d)){a=d.offsetWidth/b;a=Math.min(a,c);var h;b=L.mainImageHeightPartitions;c=L.mainImageMaxSizes;if(y(c)&&y(b)){for(var l=0,m=p.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,
d=0;d<b.length;d++)m>b[d]&&(l=d+1);c.length>=l&&(h=c[l])}y(h)&&(a=Math.min(h[1],a))}return a},getColorFromState:function(e,b){if(e){b=b||L;var c="";a.each(b.visualDimensions,function(a,b){e[b]&&(c+=" "+e[b])});return c&&c.substring(1)}},createThumbnail:function(a,b,c,d){var h=c.find(".template").clone().removeClass("template").addClass("item"),l=document.createElement("img");l.src=b;h.find(".placeHolder").replaceWith(l);(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&h.addClass("heroImageThumbnail");
y(d)&&h.addClass(d);k.declarative.create(h,"thumb-action",a);h.attr&&h.attr("data-ux-click","");c.append(h)},selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(e,b,d,h,l,m,f,k){var D=a.extend({},d.foresterMetadataParams);null!==h&&(D.method+="."+h);var H=[];b.disabledViewIds&&(H=b.disabledViewIds);return c.embed({parentElement:e[0],
streamingUrls:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,swfUrl:d.swfUrl,foresterMetadataParams:D,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl},videoAds:d.videoAds,bindings:{play:function(){"ImmersiveView"===h?q||(q=!0,n.postCountMetric("dppc_chromefulVideoPlayedIV")):C||(C=!0,n.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:b.durationSeconds-1,type:"position",
callback:function(a,b,e){l&&(I(0,m,k),N(f))}}],disabledViewIds:H})},loadMediaIntoAiry:function(a,b,c,d){a&&a.getMediaSourceInfo()!==b.url&&(d?(G={mediaSourceInfo:[b.url],contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"},a.loadMedia(G)):a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}}))},showUnavailable:function(c){c&&(a("#imageBlock .unvailableVariation").html(c),
a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:I,toggleVideoCaption:N,selectThumbnail:K,spinner:function(c,b){var d=a("#imageBlock .a-spinner").parent();0===d.length&&(d=a("\x3cdiv\x3e\x3c/div\x3e").append(a("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),c.append(d),d.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)",
"z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));b?d.show():d.hide();return d},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:v,getIndexForVariant:d,getImageHash:D,lazyLoadingRequired:function(a,b,c){b=Math.max(d(a.color,b.getCurrentItem().variant,c),0);b=-1!==D(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==v(a);return!c.lazyLoadExperienceDisabled&&
!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:l,repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();l(c,16,9,b)},d||0)},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!y(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return y(a)&&y(a[b])&&y(a[b].url)?a[b]:-1},isImmersiveViewEnabled:m,
playVideoInImmersiveView:function(a,b){return m(a,b)&&a.useTabbedImmersiveView},useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView},getMediaSourceInfo:function(){return y(G)?G.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,b,c){b=a.colorToAsin[b]&&a.colorToAsin[b].asin;b=y(b)?b:a.mediaAsin;return{pageContext:{page:"DetailPageTablet",placement:"ImageBlock",marketplaceID:c.marketPlaceID,locale:c.languageCode,requestId:a.requestId,product:{contentID:b,contentIDType:"ASIN"},
video:{contentID:c.mediaObjectId,contentIDType:"ASIN",imageURL:c.slateUrl,videoURL:c.url}},configuration:{id:"div-light-player",type:"lightplayer",binder:"lightplayer",assets:["VSECommonComponentAssets","Brila"],features:{features:{placementcontext:"vse_ib_tablet_web"}}}}},addTag:function(a){p.ue&&p.ue.tag&&p.ue.tag(a)}}});"use strict";B.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",function(k,a,c,n){function r(d,h,m,f){if(!c.isjQueryObjDefined(d.find(".a-button-selected"))){var k=
I.getCurrentItem();if(!f||"chromeless-video"!==k.type||!A.autoplayVideo){f=0;if("hero-image"===k.type){f=E(k.color,k.variant);if(-1===f)return;f=-1!==f?f:0}var r=h+f;r>=m&&(f=0,r=h);h=n.getHeroImageHash(A,k.color,f);-1!==h&&(N.dispatch("updateModel",{data:{index:f,thumbnailIndex:r,variant:h.variant,type:"hero-image"}}),h=d.find(".item").get(r),c.selectGivenThumbnail(a(h),d))}}}function h(d,h,m){if("hero-video"===I.getCurrentItem().type)return d;h=A.heroImage&&A.heroImage[h];var f=d;c.isDefined(h)&&
(a.each(h,function(a,h){d<A.maxAlts&&(c.createThumbnail({type:"hero-image",index:a,thumbnailIndex:d,variant:h.variant},h.thumb,K,"imageThumbnail"),d++)}),r(K,f,d,m));return d}function E(d,h){var m=A.heroImage;if(1>m.length||!c.isDefined(m[d])||!c.isDefined(h))return-1;var f=-1;a.each(m[d],function(a,c){c.variant===h&&(f=a)});return f}function f(){if(v.length&&A.repositionHeroImage){var a=n.getHeroDimParams(A,I.getCurrentItem()),d;c.isDefined(a)&&(d=c.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+
a.yPos+"px ",v.css({"background-position":d,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function y(a,d,h,f){if(v.length&&a&&d){if("function"===typeof h||f){var k=new Image;k.onload=f?function(){v.css("background-image",'url("'+a+'")')}:h;k.src=a}h=d[1];var k=d[0],E;f||v.css({"background-image":'url("'+a+'")'});A.repositionHeroImage&&(d=n.getHeroDimParams(A,I.getCurrentItem(),d),c.isDefined(d)&&(h=d.width,k=d.height,
E=c.isDefined(d.xPos)?d.xPos+"px "+d.yPos+"px ":"center "+d.yPos+"px "));v.css({"background-position":E,"background-size":h+"px "+k+"px ","max-width":h+"px ","min-height":k+"px ",filter:"","-ms-filter":""})}}function x(c,d,h,f){c=n.getHeroImageHash(A,c,d);if(-1===c)return-1;d=a.map(c.main,function(a,c){return c})[0];y(d,c.main[d],h,f)}function w(a,c,d){if("hero-image"!==a.type)return-1;var h=E(a.color,I.getCurrentItem().variant),h=-1!==h?h:0;if(-1===n.getHeroImageHash(A,a.color,h))return-1;var f=
I.getCurrentItem();a.thumbnailIndex=f.thumbnailIndex;a.type=f.type;a.variant=f.variant;a.index=h;p(a,c,d)}function p(a,c,h){var f=n.getHeroImageHash(A,a.color,a.index),E;E=a&&d&&k.equals(a,d)?!0:!1;d||(d=a);if(!E&&a||c)x(a.color,a.index,c,h),d=a;v.removeClass("hide-background");k.trigger("dp:image-block:update",f)}var B,A,I,N,K,v,d={};return function(d,l,m,k){B=this;A=d;I=l;N=k;A.heroImage[A.landingAsinColor]=A.heroImage[A.defaultColor];B.render=function(c,d,f,l,e,b,g){K=l;v=a("#heroImage");c=h(d,
c,b);w(I.getCurrentItem(),g,b);return c};B.update=function(a){var d=a.data;"ingress"!==d.type&&v.addClass("hide-background");"swatchHover"===a.type?a.captured||(d.type=I.getCurrentItem().type,-1!==w(d)&&(a.captured=!0)):"hero-image"===d.type&&(p(d),"click"!==a.type&&A.usePeekHover||c.selectGivenThumbnail(a.$declarativeParent,K))};N.register("resize",f)}});"use strict";B.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",function(k,a,c){var n,r,h,E;return function(a,y,x,
p){n=this;r=a;h=p;n.render=function(a,h,f,x,y,p,v){E=x;n=this;f=r.maxAlts;x=h;y=r.colorImages[a]?r.colorImages[a].length:0;y+=c.getVideosCount(a,r);a=r.heroImage[a];p=0;a&&(p=a.length);a=y+p;a>f&&(f=a-f,a=E.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),f+="+",x={type:"ingress",index:0,thumbnailIndex:h,variant:""},a.find("#altIngressText").append(f),k.declarative.create(a,"thumb-action",x),E.append(a),x=h++);return x};n.update=function(a){"ingress"===
a.data.type&&"click"===a.type&&h.dispatch("imageClick",a)}}});"use strict";B.when("imageBlockUtils").register("ImageBlockState",function(k){return function(a,c,n){this.getImageHash=function(c){var h=n.getCurrentItem();c=k.getIndexForVariant(h.color,c||"MAIN",a);return k.getImageHash(h.color,c,a)};this.onImageUpdateForTwister=function(a){c.register("updateSelection",function(c){"swatchClick"===c.type&&"function"===typeof a&&a()})}}});"use strict";B.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",
function(k,a){function c(a,c){var f;if(c.repositionHeroImage){f=a[1];var k=a[0];if(768>=(p.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))f*=.7,k*=.7;else{var n=((p.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,n=Math.max(Math.min(n,1),0);f*=.7+.3*n;k*=.7+.3*n}f=[f,k]}return f}function n(c,k,f){var n;if(f.repositionHeroImage){var r=p.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;f=f.heroFocalPoint;
if(a.isDefined(f)){n=Math.max((r-Math.min(1500,c))/2,0);var w=Math.max((r-c)/2,0);n-=w;r=Math.max(Math.min(r,1500),1024);n=n+(r-420-23)/2-c/k[1]*f}}return n}function r(c,n,f){c=c.heroImage;return!(a.isDefined(c)&&a.isDefined(c[n])&&a.isDefined(c[n][f])&&a.isDefined(c[n][f].main))||1>k.map(c[n][f].main,function(a,c){return c}).length?-1:c[n][f]}return{getHeroImageHash:r,getHeroDimParams:function(h,E,f){if(h.repositionHeroImage){if(!a.isDefined(f)){f=r(h,E.color,E.index);if(-1===f)return;E=k.map(f.main,
function(a,c){return c})[0];f=f.main[E]}E=c(f,h);h=n(E[0],f,h);return{height:E[1],width:E[0],xPos:h,yPos:75}}}}});"use strict";B.when("A","jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(k,a,c){function n(a,n){var f=k.copy(a);if(c.isDefined(a)&&a.length>n){try{for(var r=-1,p=0;p<a.length;p++){var w=a.charAt(p);if(" "===w||"."===w||"?"===w||";"===w||","===w||":"===w)r=p;if(p===n-4){f=a.substring(0,-1===r?p:r);break}}}catch(B){f=a.substring(0,n-3)}f+="..."}return f}function r(a,
c){var f=a.lastIndexOf(".");return a="_"===a.charAt(f-1)?a.substring(0,f-1)+c+a.substring(f):a.substring(0,f)+"."+c+a.substring(f)}return{getDimension:function(a,c){var f=parseInt(a.css(c),10);return isNaN(f)?0:f},attachTabSelectHandler:function(a,c){k.on("dp:ivTabs:"+a+":select",c)},attachTabDeselectHandler:function(a,c){k.on("dp:ivTabs:"+a+":deselect",c)},attachImmersiveViewResizeHandler:function(a){k.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){k.off("dp:image-block:immersive-view:resize",
a)},attachImmersiveViewResetHandler:function(a){k.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(c){a("#"+c).hide()},unhideTabHeading:function(c){a("#"+c).show()},addStyleCodeToURL:r,getResizedThumbnailURL:function(a,c){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var f="_AA50_";c&&(f+="FMpng_RI_");return r(a,f)},populateVariationSelection:function(h){if(c.isDefined(p.DetailPage)&&
c.isDefined(p.DetailPage.StateController)){h.empty();var k=p.DetailPage.StateController.getState(),f=k.variation_label_order,n;for(n in f)if(f.hasOwnProperty(n)){var r=f[n],w=k.selected_variations[r],r=k.variation_display_labels[r];w&&a("\x3cdiv/\x3e").addClass("ivVariations").text(r+":"+w).appendTo(h)}}},populateTitle:function(a,c,f){a.html(f.title);a.attr("title",a.text());a.html(n(f.title,c))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,c){a.animate({opacity:.4},
100,c)},logError:function(a,c,f,k){p.ueLogError&&p.ueLogError(k,{logLevel:a,attribution:c,message:f})}}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(k,a,c,n,r){function h(){r.populateTitle(m.find("#ivTitle"),160,D)}function p(){var a=l.getCurrentItem().color;C=D.colorImages[a];q=D.heroImage[a];G=L=0;c.isDefined(q)&&(G=q.length);c.isDefined(C)&&(L=C.length)}function f(a){return a.hiRes||a.large||
a.main[a.main.length-1]}function y(){var a=m.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var f=d.width(),h=d.height();0<d.length&&(d[0].naturalWidth&&(f=d[0].naturalWidth),d[0].naturalHeight&&(h=d[0].naturalHeight));a.css("cursor","auto");var f=0===f?1:f,h=0===h?1:h,l=Math.min(b/f,c/h),k=h*l,n=f*l;1>l?(e?a.css("cursor","url('"+D.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor",
"zoom-in")),z=!0):z=!1;f=Math.min(n,f);h=Math.min(k-20,h);d.css({"margin-top":(c-h)/2,"margin-left":(b-f)/2,height:h,width:f});a.css("visibility","visible");g=!1}function x(a){var b=m.find("#ivLargeImage");b.css("visibility","hidden");b.empty();r.animateStageIn(b);b.append(a);y()}function w(b){m.find("#ivLargeImage").css("display","none");m.find("#ivLargeImage").css("display","block");var d;"hero-image"===b?c.isDefined(q)&&(d=f(q[u.index])):c.isDefined(C)&&(d=f(C[u.index]));if(c.isDefined(d)){m.find(".fullscreen").remove();
var e=a("\x3cimg\x3e").attr("src",d).addClass("fullscreen"),g=m.find("#ivLargeImage");r.animateStageOut(g,function(){e.load(function(){x(e)});if(e[0].complete)x(e);else{g.empty();var b=(g.height()-104)/2,c=(g.width()-80)/2;a("\x3cimg\x3e").attr("src",D.staticImages.spinner).css({position:"relative",top:b+"px",left:c+"px"}).appendTo(g)}})}}function B(a){m.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?u.type="hero-image":u.type="image";u.index=a.attr("id").split("_")[1];
w(u.type);n.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(u.index,10)+1)+"_"+(G+L))}function P(){m.delegate(".ivThumb","click",function(){var b=a(this);B(b)})}function A(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function I(a){var b=Q.top-(a.pageY-U[1])*T;a=A(Q.left-(a.pageX-U[0])*T,M.left);b=A(b,M.top);m.find(".fullscreen").css({left:a,top:b})}function N(){m.delegate("#ivLargeImage","click",function(a){if(g)y();else if(z){m.find(".fullscreen").removeAttr("style");if(z){var b=m.find("#ivLargeImage"),
c=b.find(".fullscreen");e?b.css("cursor","url('"+D.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));g=!0;var d=m.find("#ivLargeImage");M.left=d.width()-c.width();M.top=d.height()-c.height();var d=b.height()/2,f=b.width()/2;U=[b.offset().left+f,b.offset().top+d];Q.top=d-c.height()/2;Q.left=f-c.width()/2;c.css({position:"relative",left:Q.left,top:Q.top});T=Math.max(c.height()/b.height(),c.width()/b.width())}I(a);n.postCountMetric("dpcc_iv_largeImageCLick")}});
m.delegate("#ivLargeImage","mousemove",function(a){g&&I(a)})}function K(){m.find("#ivLargeImage").empty()}function v(d){if(b){m=a("#ivMain");p();u=l.getCurrentItem();h();r.populateVariationSelection(m.find("#ivVariationSelection"));d=m.find("#ivThumbs");d.find(".ivRow").not(".placeholder").remove();for(var e=G+L,g=0,f=0;g<e;)for(var k=d.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(d),n=0;4>n&&g<e;n++,g++,f++)if(f<G){var v=q[g].thumb,D=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id",
"ivHeroImage_"+g).appendTo(k);D.find(".ivThumbImage").css("background",'url("'+r.getResizedThumbnailURL(v)+'") center no-repeat')}else f>=G&&f<L+G&&(v=C[g-G].thumb,D=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(g-G)).appendTo(k),D.find(".ivThumbImage").css("background",'url("'+r.getResizedThumbnailURL(v)+'") center no-repeat'));R();b=!1}else h();d=a("#ivImagesTab").height();m.css("height",d);e=m.find("#ivTitle").outerHeight(!0);g=m.find("#ivVariationSelection").outerHeight(!0);
f=m.find("#ivThumbs");k=r.getDimension(f,"margin-top")+r.getDimension(f,"margin-bottom");f.css("height",d-e-g-k);m.find("#ivLargeImage").css("height",d);d=m.find("#ivStage");e=m[0]&&m[0].getBoundingClientRect&&Math.floor(m[0].getBoundingClientRect().width)||m.width();d.css("width",e-r.getDimension(m,"padding-left")-r.getDimension(m,"padding-right")-m.find("#ivThumbColumn").width()-r.getDimension(d,"margin-left")-r.getDimension(d,"margin-right"));u=l.getCurrentItem();d="hero-image"===u.type?m.find("#ivHeroImage_"+
u.index):"image"===u.type?m.find("#ivImage_"+u.index):c.isDefined(q)?m.find("#ivHeroImage_"+u.index):m.find("#ivImage_"+u.index);c.isjQueryObjDefined(d)||(d=m.find("#ivImage_0"));B(d)}var d,D,l,m,q,C,G,L,u,e=navigator.userAgent.match(/msie|trident/i),b=!0,g=!1,z=!1,M={},Q={},T,U,b=!0,R=k.once(function(){P();N();r.attachImmersiveViewResizeHandler(v);r.attachTabDeselectHandler("ivImagesTab",K)});return function(c,e,g,f){d=this;D=c;l=e;d.render=function(c,d,e,g,f,h){b=!0;p();0===G+L?r.hideTabHeading("ivImagesTabHeading"):
r.unhideTabHeading("ivImagesTabHeading");1===G+L?a("#ivThumbs").hide():a("#ivThumbs").show()};d.update=function(a){};r.attachTabSelectHandler("ivImagesTab",v)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(k,a,c,n,r,h,E){function f(){D.delegate(".ivThumb","click",function(){var b=a(this);D.find(".ivThumb").removeClass("selected");b.addClass("selected");
b.hasClass("ivThumbVideo")&&(l.type="chromeful-video",l.index=b.attr("id").split("_")[1])})}function y(){var c=a("#ivVideosTab").height();D.css("height",c);var d=D.find(".vse-video-block");q=c-r.getDimension(D,"padding-top")-r.getDimension(D,"padding-bottom");d.css({"max-height":c,overflow:"hidden"});if(b)D.css({"max-width":Math.floor(1.77*q)});else{var c=D.find(".vse-airy-container"),d=D.find(".vse-ib-metadata"),e=Math.floor(q-r.getDimension(d,"height")),f=Math.floor(1.77*e);c.css({"max-height":e,
"max-width":f});d.css("max-width",f);g&&(c=D.find(".vse-vertical-scroll"),d=r.getDimension(c,"margin-top")+r.getDimension(c,"margin-bottom"),c.css("max-height",q-d))}}function x(){w();m&&m.pause();z=!1;u=!0;L=null}function w(){z=!1;m&&m.pause()}function B(b){L=b.clickTimeStamp;e&&(E.get(k,"#ivVideoBlock",d,U,R),D=a("#ivVideoBlock"),v.getCurrentItem(),l=v.getCurrentItem(),M());y();z=!0;e=!1;I()}function P(b){e&&(D=a("#ivVideoBlock"),v.getCurrentItem(),l=v.getCurrentItem(),M());z&&I();y()}function A(a){m=
a.airy;z&&m.play({isAsync:!0})}function I(){if(m&&(m.play({isAsync:!0,eventTimestamp:L||(new Date).getTime()}),n.postCountMetric("dpcc_vse_videoBlock_video_played"),u)){var a=p.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,n.postTimeMetric("dpcc_vse_vitff",a),u=!1)}}var N,K,v,d,D,l,m,q,C,G,L,u=!0,e=!0,b=!1,g=!1,z=!1,M=k.once(function(){f();r.attachImmersiveViewResizeHandler(P);r.attachTabDeselectHandler("ivVideosTab",w);r.attachImmersiveViewResetHandler(x)}),Q=function(d,
e,g){a("#ivVideoBlockSpinner").addClass("aok-hidden");n.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+e.placement);d=v.getCurrentItem().color;d=c.getVideoHash(d,0,K);m||(m=c.createAiryInstanceForChromeful(a("#ivVideoBlock"),d,K.airyConfig,"ImmersiveView"));b=!0;a("#ivVideoBlock").css({"max-width":1.77*q,margin:"0 auto"});z&&b&&m.play({isAsync:!0})},T=function(b,c,g){e||E.get(b,"#ivVideoBlock",d,U,R);a("#ivVideoBlockSpinner").addClass("aok-hidden")},U=function(a,b,c){g=!0;y();z&&I()},R=function(a,
b,c){n.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,b,g,f){N=this;K=a;v=b;N.render=function(a,b,g,f,l,m){a=v.getCurrentItem().color;b=c.getVideoHash(a,0,K);C=K.colorToAsin[a]&&K.colorToAsin[a].asin;C=c.isDefined(C)?C:K.mediaAsin;G=null!==K.vseVideoDataSourceTreatment&&"T1"===K.vseVideoDataSourceTreatment?"ASIN":"physicalID";e=!0;-1===b?r.hideTabHeading("ivVideosTabHeading"):(r.unhideTabHeading("ivVideosTabHeading"),d={page:"DetailPage",
placement:"ImageBlock",device:"Desktop",marketplaceID:b.marketPlaceID,locale:b.languageCode,product:{contentID:C,contentIDType:"ASIN"},video:{contentID:b.mediaObjectId,contentIDType:G,videoURL:b.url,imageURL:b.slateUrl},requestId:K.dpRequestId,metadata:{ProductTitle:K.title}},h.get(k,"#ivVideoBlock",d,T,Q))};N.update=function(a){};r.attachTabSelectHandler("ivVideosTab",B);k.on("vseAiry",A)}});"use strict";B.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",
function(k,a,c,n,r,h,p){function f(){var b=a("#iv360Tab").height();z.css("height",b);var c=z.find("#ivTitle360").outerHeight(!0),d=z.find("#ivVariationSelection360").outerHeight(!0),e=z.find("#ivThumbs360"),g=p.getDimension(e,"margin-top")+p.getDimension(e,"margin-bottom");e.css("height",b-c-d-g);b=z.find("#ivStage360");c=z[0]&&z[0].getBoundingClientRect&&Math.floor(z[0].getBoundingClientRect().width)||z.width();b.css("width",c-p.getDimension(z,"padding-left")-p.getDimension(z,"padding-right")-z.find("#ivThumbColumn360").width()-
p.getDimension(b,"margin-left")-p.getDimension(b,"margin-right"))}function y(){P();var a=z.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});p.animateStageIn(a)},200);x()}function x(){if(0<V){var a=z.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function w(c,d){if(V<c.length){var e=a("\x3cimg /\x3e").css({display:"block",width:6*Q+"px",height:T+"px"});e.hide();d.append(e);e.get(0).onload=function(){d.closest(document.documentElement).length&&
(V++,1===V&&(x(),0<ma&&(r.time("dppc_loadTime360",Date.now()-ma,b.mediaAsin),h.postTimeMetric("dppc_loadTime360",Date.now()-ma))),0<ea&&(r.time("dppc_perSpriteloadTime360",Date.now()-ea,b.mediaAsin),h.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-ea)),z.find("#iv360Spinner").hide(),e.show(),ga=5*M.imageLocations[Math.floor(ha/M.imageLocations[0].length)][ha%M.imageLocations[0].length],w(c,d))};e.attr("src",c[V].replace(/(\._SP)\d+(,)\d+/,"$1"+R+"$2"+U));ea=Date.now()}}function B(a){if(c.isDefined(M.spriteWidthSizes)&&
0<M.spriteWidthSizes.length){var b=M.spriteWidthSizes,d=b.length,e=b[0],g=b[d-1];if(a<=e)return e;if(a>g)return g;for(e=0;e<d;e++)if(a>b[e]&&a<=b[e+1])return b[e+1]}else return a}function P(){var c=z.find("#ivLarge360");c.children("#image-360-sprites").length||(c.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),c.css({"margin-left":0,"margin-top":0,width:c.parent().width(),height:c.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none",
"-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",b.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(c),Z=!0,A())}function A(){if(c.isDefined(M.spriteURLs)&&c.isDefined(z)&&Z&&!fa){var e=z.find("#ivLarge360"),g=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});c.isDefined(M.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto",
"margin-right":"auto",display:"block"}).attr("src",M.staticImages.hint360).appendTo(g);a("\x3cdiv\x3e").css({"text-align":"center"}).text(b.staticStrings.dragToSpin).appendTo(g);g.appendTo(e);var g=M.imageWidth,f=M.imageHeight,h=e.parent().width(),k=e.parent().height(),l=0,m=0;g/f>h/k?(R=B(h),U=Math.round(f/g*R),Q=Math.ceil(h),T=Math.ceil(U/R*h),m=(k-T)/2):(U=B(k),R=Math.round(g/f*U),T=Math.ceil(k),Q=Math.ceil(R/U*k),l=(h-Q)/2);e.css({"margin-left":l,"margin-top":m,width:Q+"px",height:T+"px",overflow:"hidden",
position:"relative"});e.children("#image-360-sprites").css("width",6*Q+"px");w(M.spriteURLs,z.find("#image-360-sprites"),0);g=z.find("#ivLarge360");g.bind("mousedown",v);g.bind("touchstart",I);g.bind("touchmove",N);g.bind("touchend",K);a(document).bind("mousemove",d);a(document).bind("mouseup",D);c.isDefined(b.staticImages.grab)&&e.css("cursor","url('"+b.staticImages.grab+"'), auto");fa=!0}}function I(a){F=!0;ba=a.originalEvent.targetTouches[0].clientX}function N(a){F&&(l(a.originalEvent.targetTouches[0].clientX-
ba),ba=a.originalEvent.targetTouches[0].clientX)}function K(a){F&&(F=!1)}function v(a){da=!0;H=a.originalEvent.clientX;c.isDefined(b.staticImages.grabbing)&&(a=z.find("#ivLarge360"),a.css("cursor","url('"+b.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+b.staticImages.grabbing+"'), auto"));return!1}function d(a){da&&(l(a.originalEvent.clientX-H),H=a.originalEvent.clientX)}function D(a){da&&(da=!1,c.isDefined(b.staticImages.grab)&&(a=z.find("#ivLarge360"),
a.css("cursor","url('"+b.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function l(a){ga-=a/Q*180;W&&(r.count("dppc_360dragToSpin",b.mediaAsin),h.postCountMetric("dppc_360dragToSpin"));W=!1;for(a=ga;0>a;)a+=360;for(;360<a;)a-=360;ga=a;var d;a=360;for(var e=0;e<V;e++)for(var g=0;g<M.imageLocations[e].length;g++){var f=Math.abs(ga-5*M.imageLocations[e][g]);f<a&&(a=f,d=e*M.imageLocations[0].length+g)}d!==ha&&(a=Math.floor(d/M.imageLocations[0].length),a!==Math.floor(ha/
M.imageLocations[0].length)&&(c.isDefined(ja)||(ja=document.createElement("canvas").getContext("2d")),e=z.find("#image-360-sprites").children(),ja.drawImage(e[a],0,0)),a=z.find(".iv360Hint").not(".iv360HintFaded"),c.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ha=d;a=d%M.imageLocations[0].length*-1*Q;d=-1*Math.floor(d/M.imageLocations[0].length)*T;e=z.find("#ivLarge360").children("#image-360-sprites");e.css("-webkit-transform","translate3d("+a+"px, "+d+"px, 0)");e.css("transform",
"translate3d("+a+"px, "+d+"px, 0)")}function m(){if(ca){z=a("#ivMain360");var c=g.getCurrentItem().color;G()&&L(c);M=G()?b.spin360ColorData[c]:void 0;p.populateTitle(z.find("#ivTitle360"),160,b);p.populateVariationSelection(z.find("#ivVariationSelection360"));z.find("#ivLarge360").empty();V=0;fa=Z=!1;ha=ga=0;ka();ca=!1}0!==a("#iv360Tab").height()&&(p.detachImmersiveViewResizeHandler(m),f(),y(),ma=Date.now(),t=W=!0,r.count("dppc_click360",b.mediaAsin),h.postCountMetric("dppc_click360"))}function q(d,
e,f){var k=b.colorToAsin[f],l={},m=500;if(!k||!k.asin)if(f===b.defaultColor)k={asin:b.winningAsin};else return;l.params={asin:k.asin};var q="360"+k.asin,v=Date.now();l.success=function(k){r.time("dppc_asyncRequestTime360",Date.now()-v,b.mediaAsin);h.postTimeMetric("dppc_asyncRequestTime360",Date.now()-v);if(k&&c.isDefined(k.spin360)){if(k=k.spin360.spin360Model)b.spin360ColorData[f]=k,f===g.getCurrentItem().color&&(M=b.spin360ColorData[f],A(),a("#ivThumbs360").hide(),p.unhideTabHeading("iv360TabHeading"),
C(d,e,f));c.ajaxState(q,"success")}else l.error()};l.error=function(){r.count("dppc_asyncFailedTransient360",b.mediaAsin);h.postCountMetric("dppc_asyncFailedTransient360");r.time("dppc_asyncRequestTime360",Date.now()-v,b.mediaAsin);h.postTimeMetric("dppc_asyncRequestTime360",Date.now()-v);m*=2;16E3>=m?setTimeout(function(){v=Date.now();n.load("/gp/product/features/apparel-main-image/360.html",l)},m):(r.count("dppc_asyncFailed360",b.mediaAsin),h.postCountMetric("dppc_asyncFailed360"),c.ajaxState(q,
"fail"))};c.ajaxState(q)&&"fail"!==c.ajaxState(q)||(n.load("/gp/product/features/apparel-main-image/360.html",l),c.ajaxState(q,"sent"))}function C(a,d,e){if(c.isImmersiveViewEnabled(b,g.getCurrentItem().color)&&G()&&L(e)){if(d===b.maxAlts){e=a.find(".item.imageThumbnail");var f=a.find(".item.videoThumbnail");c.isDefined(f)&&1<f.length?f.last().remove():e.last().remove();d--}e=a.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item");k.declarative.create(e,
"button-360-click");a.append(e);d++;r.count("dppc_display360",b.mediaAsin);h.postCountMetric("dppc_display360")}return d}function G(){return b&&c.isDefined(b.spin360ConfigEnabled)&&b.spin360ConfigEnabled}function L(a){return c.isDefinedAndNotEmpty(b.spin360ColorData[a])?!0:c.isDefined(b.spin360LazyLoadEnabled)&&b.spin360LazyLoadEnabled}function u(){t&&(r.time("dppc_duration360",Date.now()-ma,b.mediaAsin),h.postTimeMetric("dppc_duration360",Date.now()-ma),t=!1)}var e,b,g,z,M,Q,T,U,R,H,ba,Z=!1,fa=!1,
ga=0,ha=0,ma=0,ea=0,da=!1,F=!1,V=0,ja,W=!0,t=!1,ca=!0,ka=k.once(function(){p.attachImmersiveViewResizeHandler(m);p.attachImmersiveViewResizeHandler(f);p.attachImmersiveViewResetHandler(u);p.attachTabDeselectHandler("iv360Tab",u)});return function(d,f,h,k){e=this;b=d;g=f;d=b.landingAsinColor;f=b.defaultColor;c.isDefined(b.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",p.addStyleCodeToURL(b.staticImages.icon360,"_FMpng_RI_"));G()&&(b.spin360ColorData||
(b.spin360ColorData={}),d===f&&c.isDefinedAndEmpty(b.spin360ColorData[f])&&delete b.spin360ColorData[f]);e.render=function(d,e,g,f,h,k){ca=!0;G()&&L(d)?(g=b.spin360ColorData[d],c.isDefinedAndEmpty(g)?p.hideTabHeading("iv360TabHeading"):c.isDefinedAndNotEmpty(g)?(a("#ivThumbs360").hide(),p.unhideTabHeading("iv360TabHeading"),C(f,e,d)):(b.spin360ColorData[d]={},p.hideTabHeading("iv360TabHeading"),q(f,e,d))):p.hideTabHeading("iv360TabHeading")};e.update=function(a){};p.attachTabSelectHandler("iv360Tab",
m)}});B.register("nexusLogger360",function(){return{count:function(k,a){p.ue&&p.ue.event({asin:a,metricName:k,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(k,a,c){p.ue&&p.ue.event({asin:c,metricName:k,metricValue:a},"hit-360","hit360.clientEvent.3")}}});"use strict";B.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(k,a){try{var c=p.location.host,n={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},r=c.split(".")[1],
h=-1===c.indexOf(".proxy.amazon.com")?"/vap/ew/":void 0!==n[r]?n[r]:"https://www.amazon.com/vap/ew/",E="vse_lazyLoaderHook:success:",f="vse_lazyLoaderHook:error:",y="vse_preLoaderHook:success:",x="vse_preLoaderHook:error:",w="vse_lightPlayerLoaderHook:success:",J="vse_lightPlayerLoaderHook:error:",P=4E3,A=3}catch(I){a.logError("FATAL","vse_ns_desktop","[Domain] ",I)}B.register("vse_ns_preLoaderHook",function(){function c(f,n){try{var d=f.A,p=f.block,l=f.request,m=f.handleFailure,q=f.handleSuccess,
r=d.$;n--;var w=A-n-1,B=d.now();d.ajax(h+"componentbuilder",{params:l,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:l.timeout||P,withCredentials:!0,success:function(a){var b=d.now()-B;k.postTimeMetric(y,b);k.postCountMetric(y+l.page+":"+l.placement+":"+w);r(p).html(a);q(d,l,a)},error:function(a){k.postCountMetric(x+l.page+":"+l.placement+":"+w);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<n?c(f,n):(k.postCountMetric(x,1),m(d,l,a))}})}catch(u){a.logError("FATAL",
"vse_ns_desktop","[vse_ns_preLoaderHook] ",u)}}return{get:function(a,f,d,h,k){c({A:a,block:f,request:d,handleFailure:k,handleSuccess:h},A)}}});B.register("vse_ns_lazyLoaderHook",function(){function c(n,p,d){try{var r=n.A,l=n.context,m=n.handleFailure,q=n.handleSuccess;p.attr("data-configuration");var w=atob(p.attr("data-configuration")),x=JSON.parse(w),y={pageContext:l,configuration:x},u=r.now();d--;var e=A-d-1;r.ajax(h+"subcomponent/"+x.type,{params:y,paramsFormat:"json",method:"post",contentType:"application/json",
timeout:l.timeout||P,withCredentials:!0,success:function(a){var b=r.now()-u;k.postTimeMetric(E,b);k.postCountMetric(E+l.page+":"+l.placement+":"+x.type+":"+e);p.html(a);q(r,y,a)},error:function(a){k.postCountMetric(f+l.page+":"+l.placement+":"+x.type+":"+e);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<d?c(n,p,d):(k.postCountMetric(f,1),m(r,y,a))}})}catch(b){a.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",b)}}return{get:function(a,f,d,h,k){var m=a.$;m(f+" div[data-configuration]").each(function(){c({A:a,
context:d,handleFailure:k,handleSuccess:h},m(this),A)})}}});B.register("vse_ns_videoPlayer",function(){function c(f,n,d){try{var p=f.A,l=f.block,m=f.request,q=f.handleFailure,r=f.handleSuccess,x=p.$;d--;var y=A-d-1,u=p.now();p.ajax(h+"subcomponent/lightvideoplayer",{params:m,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:m.timeout||P,withCredentials:!0,success:function(a){var c=p.now()-u;k.postTimeMetric(w,c);k.postCountMetric(w+m.page+":"+m.placement+":"+
y);x(l).html(a);r(p,m,a)},error:function(a){k.postCountMetric(J+m.page+":"+m.placement+":"+y);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<d?c(f,d):(k.postCountMetric(J,1),q(p,m,a))}})}catch(e){a.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",e)}}return{get:function(a,f,d,h,k){c({A:a,block:f,request:d,handleFailure:k,handleSuccess:h},A)}}})})});